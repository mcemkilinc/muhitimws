doctype html
html
 head(lang='en')
  meta(charset='UTF-8')
  // Bootstrap stuff
  link(rel='stylesheet', href='https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css')
  link(rel='stylesheet', href='https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css')
  script(src='https://code.jquery.com/jquery-1.10.2.min.js')
  script(src='https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js')
  script(type='text/javascript', src='https://maps.google.com/maps/api/js?sensor=false&libraries=places&key=AIzaSyCJSzLVpA2QIhERC6GRBHnR2m3J4BXKjdk')
  script(src='/js/locationpicker.jquery.js')
  title Simple example
  meta(name='viewport', content='width=device-width, initial-scale=1.0')
 body
  button.btn.btn-primary(onclick="setCurrentLocation()")
   | Mevcut Lokasyonu Ayarla
  form.form-horizontal(style='width: 300px',id='locationForm',action='/selectLocation', method='POST')
   input(type='hidden', name='_csrf', value=_csrf)
   input(type='hidden', name='LocationType', value=sRequest.query.LocationType)
   input(type='hidden', name='rMerchant', value=sRequest.query.rMerchant)
   .form-group
    label.col-sm-2.control-label Location:
    .col-sm-10
     input#us3-address.form-control(type='text')
   //.form-group
    label.col-sm-2.control-label Radius:
    .col-sm-5
     input#us3-radius.form-control(type='text',name='p_radius')
   #us3(style='width: 300px; height: 300px;')
   .clearfix &nbsp;
   .m-t-small
    .col-sm-5
     label.p-r-small.col-sm-1.control-label Lat.:
     input#us3-lat.form-control(type='text',name='location_lat', style='width: 110px')
    .col-sm-5
     label.p-r-small.col-sm-2.control-label Long.:
     input#us3-lon.form-control(type='text',name='location_long', style='width: 110px')
   .form-group
      .col-sm-offset-3.col-sm-4
          button.btn.btn.btn-primary(type='submit')
             i.fa.fa-pencil
             | Lokasyonu Kaydet
   .clearfix
   script.
    function setCurrentLocation() {
    if (navigator.geolocation) {

          navigator.geolocation.getCurrentPosition(function(position) {
     
         $('#us3').locationpicker({
     location: {
      latitude: position.coords.latitude ,
      longitude: position.coords.longitude
     },
     radius: 50
         });
     $('#us3-lat').val(position.coords.latitude);
     $('#us3-lon').val(position.coords.longitude);
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }
      
   script.
    $('#us3').locationpicker({
     location: {
      latitude: 40 ,
      longitude: 50
     },
     radius: 50,
     inputBinding: {
      latitudeInput: $('#us3-lat'),
      longitudeInput: $('#us3-lon'),
      radiusInput: $('#us3-radius'),
      locationNameInput: $('#us3-address')
     },
     enableAutocomplete: true,
     onchanged: function (currentLocation, radius, isMarkerDropped) {
      // Uncomment line below to show alert on each Location Changed event
      //alert("Location changed. New location (" + currentLocation.latitude + ", " + currentLocation.longitude + ")");
     }
     });

